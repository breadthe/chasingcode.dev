<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="Carbon PHP library tips, tricks, shortcuts, utilities, patterns, and examples">

            <meta property="og:title" content="Carbon PHP Practical Examples" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://chasingcode.dev/blog/carbon-php-practical-examples"/>
    <meta property="og:description" content="Carbon PHP library tips, tricks, shortcuts, utilities, patterns, and examples" />

        
        <title>Carbon PHP Practical Examples | Chasing Code</title>

        <link rel="home" href="https://chasingcode.dev">

        <link rel="apple-touch-icon" sizes="57x57" href="/assets/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/assets/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/favicons/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

        <link href="/blog/feed.atom" type="application/atom+xml" rel="alternate" title="Chasing Code Blog">

        

        <link rel="stylesheet" href="/assets/build/css/main.css?id=3824d15a7550cadd6feea53f638e89ad">
        <link href="https://github.com/breadthe" rel="me">
        <link rel="webmention" href="https://webmention.io/chasingcode.dev/webmention" />
        <link rel="pingback" href="https://webmention.io/chasingcode.dev/xmlrpc" />
    </head>

    <body class="flex flex-col justify-between bg-gray-50 text-grey-darkest leading-normal font-sans">

        <header class="flex items-center py-4" role="banner">
    <div class="container flex items-center max-w-6xl mx-auto px-4 lg:px-8">
        <div class="flex items-center">
            <a href="/" title="Chasing Code home" class="flex items-center justify-center gap-2 mr-2">
                <img width="48" height="48" src="/assets/images/chasingcode-logo.png" alt="Chasing Code logo" />

                <span class="text-xl leading-none font-bold text-teal-700">Chasing Code</span>
            </a>
        </div>

        <div id="vue-search" class="w-full flex justify-end items-center sm:gap-4">
                            <search
                    data-belongs-to-blog="1"
                ></search>
            
            <nav class="hidden sm:flex items-center justify-end gap-8 text-lg">
    <ul class="flex gap-4">
        <li>
    <a
        href=/blog
        class="text-teal-700 hover:text-teal-900 text-teal-900 underline underline-offset-4 decoration-4 decoration-teal-400"
    >Blog</a>
</li>

        <li>
    <a
        href=/archive
        class="text-teal-700 hover:text-teal-900"
    >Archive</a>
</li>

        <li>
    <a
        href=/games
        class="text-teal-700 hover:text-teal-900"
    >Games</a>
</li>

        <li>
    <a
        href=/uses
        class="text-teal-700 hover:text-teal-900"
    >Uses</a>
</li>

        <li>
    <a
        href=/about
        class="text-teal-700 hover:text-teal-900"
    >About</a>
</li>

        <li>
    <a
        href=/contact
        class="text-teal-700 hover:text-teal-900"
    >Contact</a>
</li>
    </ul>
</nav>

            <button class="flex justify-center items-center h-10 px-4 rounded-full sm:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current w-6 text-teal-400" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current w-6 text-teal-400" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

        </div>
    </div>
</header>

<nav id="js-nav-menu" class="hidden sm:hidden mb-4">
    <ul class="my-0 flex flex-col gap-4 px-4">
        <li>
    <a
        href=/blog
        class="text-teal-700 hover:text-teal-900 text-teal-900 underline underline-offset-4 decoration-4 decoration-teal-400"
    >Blog</a>
</li>

        <li>
    <a
        href=/archive
        class="text-teal-700 hover:text-teal-900"
    >Archive</a>
</li>

        <li>
    <a
        href=/games
        class="text-teal-700 hover:text-teal-900"
    >Games</a>
</li>

        <li>
    <a
        href=/uses
        class="text-teal-700 hover:text-teal-900"
    >Uses</a>
</li>

        <li>
    <a
        href=/about
        class="text-teal-700 hover:text-teal-900"
    >About</a>
</li>

        <li>
    <a
        href=/contact
        class="text-teal-700 hover:text-teal-900"
    >Contact</a>
</li>
    </ul>
</nav>

        <main
            role="main"
            class="flex-auto w-full max-w-2xl mx-auto"
        >
            
                <article class="p-4 sm:p-6 bg-white rounded">
        <header class="mb-2">
            
            <h1 class="font-serif text-3xl mb-1 md:mb-2">Carbon PHP Practical Examples</h1>

            <div class="flex flex-col md:flex-row gap-2">
                <small class="font-mono">
                    by <a href="/about">webmaster</a>
                </small>

                <small class="hidden md:block">&bull;</small>

                <small class="font-mono">
                    2022-04-17
                </small>

                                    <small class="hidden md:block">&bull;</small>

                    <small class="font-mono">
                        <strong>updated: </strong>
                        2023-02-06
                    </small>
                
                <small class="hidden md:block">&bull;</small>

                <small class="flex flex-wrap gap-2">
                    <a
        href="/blog/tags/php"
        title=" posts in View posts in #php"
        class="category--tag font-mono font-light text-teal-700"
        >
    #php
</a>
                    <a
        href="/blog/tags/carbon"
        title=" posts in View posts in #carbon"
        class="category--tag font-mono font-light text-teal-700"
        >
    #carbon
</a>
                    <a
        href="/blog/tags/laravel"
        title=" posts in View posts in #laravel"
        class="category--tag font-mono font-light text-teal-700"
        >
    #laravel
</a>
            </small>
            </div>

                    </header>

        <div class="post font-light text-gray-900 tracking-wide pb-4" v-pre>
            <p>I've been working and experimenting a lot lately with <a href="https://carbon.nesbot.com/">Carbon</a>, the sublime PHP date and time utility library. I've tweeted a lot of Carbon tips and decided to collect all these tips into a permanent article.</p>

<h2>Laravel - Carbon\Carbon vs Illuminate\Support\Carbon</h2>

<p>If you're using Laravel, Carbon is included in the framework by default. There are, however, two versions of it: <code>Carbon\Carbon</code> and <code>Illuminate\Support\Carbon</code>. Which one to use?</p>

<p>Based on my research, it appears that it's safe to use either. Personally I tend to use <code>Carbon\Carbon</code> because it looks cleaner when I import it. The <code>Illuminate</code> version is a wrapper around the official Carbon library, for backward/forward compatibility.</p>

<h2>Laravel - now() vs today()</h2>

<p>Laravel offers several date/time shortcuts. The most commonly used are <code>now()</code> and <code>today()</code>.</p>

<pre><code class="language-php">// Carbon\Carbon::now() vs now() -- they are functionally equivalent but...

Carbon\Carbon::now(); // returns an instance of Carbon\Carbon
now(); // returns an instance of Illuminate\Support\Carbon

Carbon\Carbon::today(); // returns an instance of Carbon\Carbon
today(); // returns an instance of Illuminate\Support\Carbon

// Difference between now() and today()

now(); // returns the full timestamp
// =&gt; Illuminate\Support\Carbon @1648647277 {#3867
//     date: 2022-03-30 13:34:37.437085 UTC (+00:00),
//   }

today(); // returns only the date part
// =&gt; Illuminate\Support\Carbon @1648598400 {#3870
//     date: 2022-03-30 00:00:00.0 UTC (+00:00),
//   }
</code></pre>

<h2>Timezone considerations</h2>

<p>When working with any date/time helper, be aware that by default the result is always expressed in UTC (universal) time. UTC is the format most commonly used to  store timestamps in the database (with some exceptions).</p>

<p>As a consequence, using <code>now()</code> to retrieve a timestamp for a user who is not in the UTC timezone might give unwanted results.</p>

<p>One technique to show each user their local timezone is to:
- store the timestamp in UTC for each user record
- store the local timezone for each user (Example: <code>'America/Chicago'</code>)
- perform timezone conversion as shown below to display local time</p>

<pre><code class="language-php">now(); // returns UTC time
// =&gt; Illuminate\Support\Carbon @1648647744 {#3864
//     date: 2022-03-30 13:42:24.742152 UTC (+00:00),
//   }

now()-&gt;setTimezone('America/Chicago'); // returns local time
now()-&gt;tz('America/Chicago'); // alias
now('America/Chicago'); // alias
// =&gt; Illuminate\Support\Carbon @1648647747 {#3865
//     date: 2022-03-30 08:42:27.037484 America/Chicago (-05:00),
//   }

today()-&gt;setTimezone('America/Chicago'); // returns local date
today()-&gt;tz('America/Chicago'); // alias
today('America/Chicago'); // alias
// =&gt; Illuminate\Support\Carbon @1648598400 {#3871
//     date: 2022-03-29 19:00:00.0 America/Chicago (-05:00),
//   }

now()-&gt;tz; // gets the current timezone
// =&gt; Carbon\CarbonTimeZone {#1112
//      timezone: UTC (+00:00),
//    }
now('America/Chicago')-&gt;tz;
// =&gt; Carbon\CarbonTimeZone {#1107
//      timezone: America/Chicago (-05:00),
//    }

// These are the same; all return "2022-03-30" UTC
date('Y-m-d'); // native PHP
now()-&gt;format('Y-m-d');
now()-&gt;toDateString(); // nice shortcut for the above
</code></pre>

<p>In Laravel Eloquent:</p>

<pre><code class="language-php">$userId = 123;
$user = User::find($userId)-&gt;created_at;
</code></pre>

<h2>Calculate the local time across timezones</h2>

<p>Let's assume we are in Hawaii and we are interviewing with someone in Melbourne, Australia. The interviewer has given us their local date and time, but we want to find out what our local time will be. Carbon can make that conversion.</p>

<pre><code class="language-php">// 12 PM in Melbourne, Australia
$auDateTime = 'Thursday Feb 9 2023 12:00:00';
$auTimezone = 'Australia/Melbourne';

$auTime = Carbon\CarbonImmutable::createFromTimeString($auDateTime, $auTimezone);

$localTimezone = 'US/Hawaii';
$localDateTime = $auTime-&gt;timezone($localTimezone)-&gt;toDateTimeString();
// =&gt; "2023-02-08 15:00:00"
// 3 PM in Hawaii, USA
</code></pre>

<h2>Start/end of week/month/year</h2>

<p>Every developer will eventually need to calculate week/month/year boundaries (start/end dates). Carbon makes this easy.</p>

<p><strong>Note</strong> Consider using timezone conversion, otherwise you might not get the desired result if the local time is only a few hours away from UTC. In other words, it might be "tomorrow" in UTC, but still "today" in local time.</p>

<pre><code class="language-php">$today = Carbon\Carbon::now()-&gt;setTimezone('America/Chicago');
// =&gt; Carbon\Carbon @1649218375 {#1110
//      date: 2022-04-05 23:12:55.846210 America/Chicago (-05:00),
//    }

$startOfWeek = $today-&gt;startOfWeek()-&gt;toDateString(); // =&gt; "2022-04-04"
$endOfWeek = $today-&gt;endOfWeek()-&gt;toDateString(); // =&gt; "2022-04-10"

$startOfMonth = $today-&gt;startOfMonth()-&gt;toDateString(); // =&gt; "2022-04-01"
$endOfMonth = $today-&gt;endOfMonth()-&gt;toDateString(); // =&gt; "2022-04-30"

$startOfYear = $today-&gt;startOfYear()-&gt;toDateString(); // =&gt; "2022-01-01"
$endOfYear = $today-&gt;endOfYear()-&gt;toDateString(); // =&gt; "2022-12-31"
</code></pre>

<h2>First/last day of month using fluid string constructors</h2>

<p>Carbon offers a neat way of building date/time objects. One of them is the fluid string constructor which lets you use natural English language to build your object.</p>

<pre><code class="language-php">use Carbon\Carbon;

// today = 2022-04-07
// returns UTC DateTime object
// chain -&gt;toDateString() to get only the date part
Carbon::make('first day of this month'); // 2022-04-01
Carbon::make('last day of this month'); // 2022-04-30

Carbon::make('first day of last month'); // 2022-03-01
Carbon::make('last day of last month'); // 2022-03-31

Carbon::make('first day of next month'); // 2022-05-01
Carbon::make('last day of next month'); // 2022-05-31
</code></pre>

<h2>Get total seconds in a string interval</h2>

<p>This technique is extremely powerful for calculating total units for a specified interval.</p>

<p>Here's how I used it in a Laravel project. I'm tracking bicycle rides and each record in the database has a <code>INT duration</code> field in seconds. The user should be able to filter rides of a certain duration, using a user-friendly string like <code>1h30m</code>. I can use <code>CarbonInterval</code> to easily perform the conversion to seconds which I can then use to query the database.</p>

<pre><code class="language-php">use Carbon\CarbonInterval;

// Several ways to initialize the interval:
CarbonInterval::fromString('1h30m')-&gt;total('minutes');
CarbonInterval::make('1h30m')-&gt;total('minutes');
CarbonInterval::make('1h30m')-&gt;totalMinutes;
// =&gt; 90

// Many ways to write the fluid string:
// '1h 30m'
// '1hour30minutes'
// '1 hour 30 minute'
// '1 hour 30 minutes'
// '1 hour and 30 minutes'

CarbonInterval::fromString('1h 30m')-&gt;total('seconds');
// 5400

// Also
$seconds = CarbonInterval::fromString('1hour30minutes')-&gt;total('seconds');
$seconds = CarbonInterval::fromString('1 hour 30 minutes')-&gt;total('seconds');
$seconds = CarbonInterval::fromString('1 hour and 30 minutes')-&gt;total('seconds');
$seconds = CarbonInterval::fromString('1 h 30 m')-&gt;total('seconds');
$seconds = CarbonInterval::fromString('1 h 30 m')-&gt;totalSeconds;
</code></pre>

<p>You can obtain the reverse as shown next. Note that the output string is not exactly the same as the input (I need to figure out if this is possible). More on <code>cascade()</code> in the next sections.</p>

<pre><code class="language-php">use Carbon\CarbonInterval;

CarbonInterval::fromString('5400 seconds')-&gt;cascade()-&gt;forHumans(null, true);
CarbonInterval::fromString('5400seconds')-&gt;cascade()-&gt;forHumans(null, true);
CarbonInterval::fromString('5400s')-&gt;cascade()-&gt;forHumans(null, true);
// =&gt; "1h 30m"
</code></pre>

<p>Here are simplified examples of how you might use this with Laravel Eloquent.</p>

<pre><code class="language-php">/**  
 * Laravel Eloquent examples
 * - The "1h30m" string may come from a user-friendly input
 * - The duration DB column is in seconds
 */
use Carbon\CarbonInterval;

// Retrieve all rides at least 1h30m long
$seconds = CarbonInterval::fromString('1h30m')-&gt;totalSeconds;
Rides::where(['user_id' =&gt; $user-&gt;id, ['duration', '&gt;=', $seconds]])-&gt;get();

// Retrieve rides between 30m and 2h long
$minDuration = CarbonInterval::fromString('30m')-&gt;totalSeconds;
$maxDuration = CarbonInterval::fromString('2h')-&gt;totalSeconds;
Rides::where('user_id', $user-&gt;id)-&gt;whereBetween('duration', [$minDuration, $maxDuration])-&gt;get();
</code></pre>

<h2>CarbonInterval factor</h2>

<p>One gotcha when using <code>CarbonInterval</code> factors is that it will return 336 days in a year instead of 365 as most of us are used to. Carbon's month also has 28 days. How is that?</p>

<pre><code class="language-php">use Carbon\CarbonInterval;

// Retrieve the default factors for
CarbonInterval::getFactor('days', 'week'); // days in a week: 7
CarbonInterval::getFactor('weeks', 'month'); // weeks in a month: 4
CarbonInterval::getFactor('months', 'year'); // months in a year: 12

// =&gt; total days in a month = 7 * 4 = 28
CarbonInterval::getFactor('days', 'month'); // days in a month: 28

// =&gt; total days in a year = 7 * 4 * 12 = 336
CarbonInterval::getFactor('days', 'year'); // days in a year: 336
</code></pre>

<p>When you break it down like this it makes a lot of sense. There needs to be some consistency when doing date/time math and this is how Carbon achieves it. As a consequence, it might trip you up if you're not careful, as shown below. Luckily you can define your own interval factors:</p>

<pre><code class="language-php">use Carbon\CarbonInterval;

CarbonInterval::fromString('1 year')-&gt;total('days'); // ❌ 336
CarbonInterval::fromString('1 year')-&gt;totalDays; // ❌ 336

// Find out how many days are defined per year by default
CarbonInterval::getFactor('days', 'year'); // 336

// Set your own
CarbonInterval::setCascadeFactors([
  'year' =&gt; [365,  'days']
]);

// Now you get the "real" number of days in a year
CarbonInterval::getFactor('days', 'year'); // ✅ 365
CarbonInterval::fromString('1 year')-&gt;totalDays; // ✅ 365
</code></pre>

<p>Cascade factor argument order is important - the last factor in the arguments array should be the one you need to operate on. Consider these two examples:</p>

<pre><code class="language-php">CarbonInterval::setCascadeFactors([
  'month' =&gt; [30, 'days'],
  'year' =&gt; [365, 'days'],
]);
CarbonInterval::getFactor('days', 'year'); // ✅ 365
CarbonInterval::getFactor('days', 'month'); // ❌ 0
CarbonInterval::make('1 year')-&gt;totalDays; // ✅ success: 365
CarbonInterval::make('1 month')-&gt;totalDays; // ❌ failure: 0

CarbonInterval::setCascadeFactors([
  'year' =&gt; [365, 'days'],
  'month' =&gt; [30, 'days'],
]);
CarbonInterval::getFactor('days', 'year'); // ❌ 0
CarbonInterval::getFactor('days', 'month'); // ✅ 30
CarbonInterval::make('1 year')-&gt;totalDays; // ❌ failure: 0
CarbonInterval::make('1 month')-&gt;totalDays; // ✅ success: 30
</code></pre>

<h2>CarbonInterval cascade (sloppy interval conversion)</h2>

<p>When working with <code>CarbonInterval</code> it is often useful to display the resulting string in a readable, consistent format. This is where <code>cascade()</code> comes in.</p>

<p>In the examples below, we are building a fluid string interval using simple English. If we pass a messy/sloppy string we get the same back, but wouldn't it be nice to automatically parse these units into something that makes more sense? The simplest example is <code>25h</code> to <code>1d 1h</code>. This is what cascade does.</p>

<p>A practical use-case can be collecting/collating different time interval units from various parts of the app or database, then transforming them into a consistent string for displaying to the end user.</p>

<pre><code class="language-php">/**
 * CarbonInterval's cascade() method converts units
 * into the next one up, when they "spill" over.
 * This allows freeform fluid string conversion.
 */
use Carbon\CarbonInterval;

// Ugly and not very readable
CarbonInterval::fromString('13 months 36 days 56 hours')
    -&gt;forHumans();
// =&gt; "13 months 5 weeks 1 day 56 hours"

// Let's cascade that into "standard" units
CarbonInterval::fromString('13 months 36 days 56 hours')
    -&gt;cascade()
    -&gt;forHumans();
// "1 year 2 months 1 week 3 days 8 hours"

// Let's get really sloppy
// The order of the units doesn't matter - same result
CarbonInterval::fromString('56 hours 36 days 13 months')
    -&gt;cascade()
    -&gt;forHumans();
// "1 year 2 months 1 week 3 days 8 hours"

// You can use shorthand for the constructor
CarbonInterval::fromString('25h')-&gt;cascade()-&gt;forHumans();
// =&gt; "1 day 1 hour"
</code></pre>

<h2>Carbon arithmetic - adding, subtracting time intervals</h2>

<p>It's very easy to perform any kind of date/time arithmetic with Carbon. The API is so natural that you can simply guess it without referring to the documentation. A good IDE makes that even easier.</p>

<p>Furthermore, there are multiple ways of achieving the same result, including syntactic sugar for common operations such as <code>yesterday()</code> or <code>tomorrow()</code>. Units can also be specified in singular or plural.</p>

<pre><code class="language-php">use Carbon\Carbon;

Carbon::today(); // 2022-04-12

// Add one or more days
Carbon::today()-&gt;addDay(); // 2022-04-13
Carbon::today()-&gt;addDays('1'); // 2022-04-13
Carbon::today()-&gt;add('1 day'); // 2022-04-13
Carbon::today()-&gt;add('1 days'); // 2022-04-13
Carbon::today()-&gt;add('5 day'); // 2022-04-17
Carbon::today()-&gt;addYear('2'); // 2024-04-12

// Subtract one or more days
Carbon::today()-&gt;subDay(); // 2022-04-11
Carbon::today()-&gt;subDays('1'); // 2022-04-11
Carbon::today()-&gt;subtract('1 day'); // 2022-04-11
Carbon::today()-&gt;sub('1 day'); // 2022-04-11
Carbon::today()-&gt;sub('1 days'); // 2022-04-11
Carbon::today()-&gt;sub('1 week'); // 2022-04-05
Carbon::today()-&gt;subMonth('2'); // 2022-02-12

// Use unit shorthand
Carbon::today()-&gt;add('1w'); // 2022-04-19
// Or a mix of units
Carbon::today()-&gt;sub('1w1d'); // 2022-04-04

// Easier shortcuts for adding/subtracting 1 day 😎
Carbon::tomorrow(); // 2022-04-13
Carbon::yesterday(); // 2022-04-11

// Don't forget timezone conversion
Carbon::today()-&gt;tz('America/Chicago')-&gt;add('1w'); // 2022-04-18 

// Timestamps work too
Carbon::now()-&gt;toDateTimeString();
// =&gt; "2022-04-12 02:50:24"
Carbon::now()-&gt;add('1h1m1s')-&gt;toDateTimeString();
// =&gt; "2022-04-12 03:51:25"

// Very small units (milliseconds/microseconds) also work (PHP 7.1+ for full microsecond support), although they are hard to capture
// Here's a way to test that by adding the equivalent of 1 second
dump([
  Carbon::now()-&gt;toDateTimeString(),
  Carbon::now()-&gt;add('1000ms')-&gt;toDateTimeString(),
]);
// =&gt; [
//      "2022-04-11 21:30:16",
//      "2022-04-11 21:30:17",
//    ]

dump([
  Carbon::now()-&gt;toDateTimeString(),
  Carbon::now()-&gt;add('1000000microsecond')-&gt;toDateTimeString(),
]);
// =&gt; [
//      "2022-04-12 02:41:11",
//      "2022-04-12 02:41:12",
//    ]
</code></pre>

<h2>Carbon vs CarbonImmutable</h2>

<p>Both offer the same API, but when operated upon:</p>

<ul>
<li>Carbon - returns the same instance</li>
<li>CarbonImmutable - returns a new instance with the new value.</li>
</ul>

<p>When operating on Carbon instances, timestamps may get out of sync (drift) if you're not being careful. This can especially occur when chaining operations and assigning Carbon instances to multiple variables. Here's a practical example:</p>

<pre><code class="language-php">// The problem - assigning a Carbon instance to a variable
$today = Carbon\Carbon::today(); // 2022-04-14

// As you pass around the same instance and apply operations to it, the initial timestamp gets mutated

$tomorrow = $today-&gt;addDay(); // ✅ 2022-04-15
$tomorrow = $today-&gt;addDay(); // ❌ 2022-04-16
$tomorrow = $today-&gt;addDay(); // ❌ 2022-04-17
$dayAfterTomorrow = $tomorrow-&gt;addDay(); // ❌ 2022-04-18

// $today is no longer "today"
echo $today-&gt;toDateString(); // ❌ "2022-04-18"
// $tomorrow is no longer "tomorrow" either
echo $tomorrow-&gt;toDateString(); // ❌ "2022-04-18"

// --------------------------------------

// The solution - prevent drift with CarbonImmutable
$today = Carbon\CarbonImmutable::today(); // 2022-04-14

// You can operate on the original instance as many times as you want...
// ... and it will remain the same
$tomorrow = $today-&gt;addDay(); // ✅ 2022-04-15
$tomorrow = $today-&gt;addDay(); // ✅ 2022-04-15
$tomorrow = $today-&gt;addDay(); // ✅ 2022-04-15
$dayAfterTomorrow = $tomorrow-&gt;addDay(); // ✅ 2022-04-16

// Now both $today and $tomorrow are correct
echo $today-&gt;toDateString(); // ✅ "2022-04-14"
echo $tomorrow-&gt;toDateString(); // ✅ "2022-04-15"
</code></pre>

<h2>Resources</h2>

<p>A collection of Carbon-related resources from around the web.</p>

<ul>
<li><a href="https://github.com/dansoppelsa/laravel-carbon-macros">Laravel Carbon Macros</a></li>
</ul>

            <section class="mt-8">
    <div class="font-semibold">
        Liked this article? Share it on your favorite platform.
    </div>

    <div class="mt-2 flex flex-wrap gap-2">
        <a href="javascript:void(0);"
                id="mastodon-share"
                data-src="Carbon PHP library tips, tricks, shortcuts, utilities, patterns, and examples&amp;url=https://chasingcode.dev/blog/carbon-php-practical-examples"
                class="bg-mastodon-purple social--share--icon no-underline text-white hover:text-white rounded font-mono px-2 py-1"
        >Mastodon</a>

        <a href="https://twitter.com/share?url=https://chasingcode.dev/blog/carbon-php-practical-examples&text=Carbon PHP library tips, tricks, shortcuts, utilities, patterns, and examples&via=brbcoding"
           style="background: #55acee;"
           class="social--share--icon no-underline text-white hover:text-white rounded font-mono px-2 py-1"
        >Twitter</a>

        <a href="https://www.facebook.com/sharer/sharer.php?u=https://chasingcode.dev/blog/carbon-php-practical-examples"
           style="background: #3B5998;"
           class="social--share--icon no-underline text-white hover:text-white rounded font-mono px-2 py-1"
        >Facebook</a>

        <a href="https://reddit.com/submit?url=https://chasingcode.dev/blog/carbon-php-practical-examples&title=Carbon PHP Practical Examples"
           style="background: #ff5700;"
           class="social--share--icon no-underline text-white hover:text-white rounded font-mono px-2 py-1"
        >Reddit</a>

        <a href="https://news.ycombinator.com/submitlink?u=https://chasingcode.dev/blog/carbon-php-practical-examples&t=Carbon PHP Practical Examples"
           style="background: #ff6600;"
           class="social--share--icon no-underline text-white hover:text-white rounded font-mono px-2 py-1"
        >Hacker News</a>

        <a href="https://www.linkedin.com/shareArticle?url=https://chasingcode.dev/blog/carbon-php-practical-examples&title=Carbon PHP Practical Examples&summary=Carbon PHP library tips, tricks, shortcuts, utilities, patterns, and examples&source=https://chasingcode.dev"
           style="background: #4875B4;"
           class="social--share--icon no-underline text-white hover:text-white rounded font-mono px-2 py-1"
        >LinkedIn</a>

        <a href="mailto:?subject=Carbon PHP Practical Examples&body=https://chasingcode.dev/blog/carbon-php-practical-examples"
           style="background: #444444;"
           class="social--share--icon no-underline text-white hover:text-white rounded font-mono px-2 py-1"
        >Email</a>
    </div>
</section>

<script>
    // @see https://www.bentasker.co.uk/posts/documentation/general/adding-a-share-on-mastodon-button-to-a-website.html
    doDocumentReady(enableMastodonShare);

    /* Generate a share link for the user's Mastodon domain */
    function mastodonShare(e) {

        // Get the source text
        const src = e.target.getAttribute("data-src");

        // Get the Mastodon domain
        const domain = prompt("Enter your Mastodon domain (enable browser pop-ups)", "mastodon.social");

        if (domain === "" || domain == null) {
            return;
        }

        // Build the URL
        const url = "https://" + domain + "/share?text=" + src;

        // Open a window on the share page
        window.open(url, '_blank');
    }

    function doDocumentReady(fn) {
        if (document.readyState === "complete" ||
            (document.readyState !== "loading" && !document.documentElement.doScroll)
        ) {
            fn();
        } else {
            document.addEventListener("DOMContentLoaded", fn);
        }
    }

    function enableMastodonShare() {
        document.getElementById('mastodon-share').addEventListener('click', mastodonShare);
    }
</script>        </div>

        <section id="mastodon-webmention">
    <mastodon-webmention page-url="https://chasingcode.dev/blog/carbon-php-practical-examples" mastodon-toot-url="https://indieweb.social/@brbcoding/109938674293160462"></mastodon-webmention>
</section>

        

        <nav class="flex justify-between text-sm md:text-base my-4 sm:mb-0">
            <div>
                                    <a href="https://chasingcode.dev/blog/mysql-laravel-cte-group-by-year-month-with-gaps" class="no-underline" title="Older Post: How to Use MySQL CTE in Laravel to Group by Year and Month with Gaps">
                        &LeftArrow; How to Use MySQL CTE in Laravel to Group by Year and Month with Gaps
                    </a>
                            </div>

            <div>
                                    <a href="https://chasingcode.dev/blog/enable-experimental-js-css-features-electron" class="no-underline" title="Newer Post: Enable Experimental JS and CSS Features in Electron">
                        Enable Experimental JS and CSS Features in Electron &RightArrow;
                    </a>
                            </div>
        </nav>
    </article>
        </main>

        <footer class="flex flex-col gap-4 max-w-2xl m-8 sm:mx-auto text-center">
    <div class="w-full flex flex-row justify-center gap-4">
        <a href="/blog/feed.atom" class="group w-full flex flex-col items-center justify-center gap-2">
            <span class="group-hover:text-teal-400">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12.75 19.5v-.75a7.5 7.5 0 0 0-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
                </svg>
            </span>
            <span class="group-hover:text-teal-400">RSS</span>
        </a>

        <a href="https://indieweb.social/@brbcoding" class="group w-full flex flex-col items-center justify-center gap-2">
            <span class="group-hover:text-teal-400">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a4 4 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522q0-1.288.66-2.046c.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764q.662.757.661 2.046z"/>
                </svg>
            </span>
            <span class="group-hover:text-teal-400">Mastodon</span>
        </a>

        <a href="https://twitter.com/brbcoding" class="group w-full flex flex-col items-center justify-center gap-2">
            <span class="group-hover:text-teal-400">
                <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="feather feather-twitter"
>
    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg>
            </span>
            <span class="group-hover:text-teal-400">Twitter</span>
        </a>

        <a href="https://github.com/breadthe" class="group w-full flex flex-col items-center justify-center gap-2">
            <span class="group-hover:text-teal-400">
                <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="feather feather-github"
>
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
            </span>
            <span class="group-hover:text-teal-400">Github</span>
        </a>
    </div>
    <small class="italic opacity-60">
        2018-2024 🦄&nbsp; All content & opinions my own
    </small>
</footer>

        <script src="/assets/build/js/main.js?id=e27301064934efeda72c2d9e59dcaac9" async></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>
    </body>
</html>
